(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{784:function(e,t,r){"use strict";r.r(t);r(37);var n=r(8),o=r(23),c=(r(30),r(662)),d=r.n(c),l=r(48),m={$_veeValidate:{validator:"new"},props:{user:{default:null,type:Object}},data:function(){var e=this.user;return{id:e._id,email:e.email,name:e.name}},computed:Object(o.a)({},Object(l.e)("users",["isPatchPending"])),methods:Object(o.a)({},Object(l.b)({patch:"users/patch"}),{submit:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return t=d()(this,["email","name"]),e.abrupt("return",this.patch([this.id,{$set:t},{}]).then(function(){return r.$emit("status",{type:"success",message:"Account updated."})}).catch(function(e){var t=e.message;return r.$emit("status",{type:"error",message:t})}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},v=r(56),f=r(165),w=r.n(f),h=r(160),_=r(626),x=r(677),y=r(676),component=Object(v.a)(m,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[r("v-card-text",[r("h5",{staticClass:"headline mb-3"},[e._v("Account")]),e._v(" "),r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],attrs:{"error-messages":e.errors.collect("name"),"data-vv-name":"name",label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"error-messages":e.errors.collect("email"),"data-vv-name":"email",label:"Email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{disabled:e.isPatchPending,loading:e.isPatchPending,color:"primary",type:"submit"}},[e._v("Update account")])],1)],1)])},[],!1,null,null,null),j=component.exports;w()(component,{VBtn:h.a,VCard:_.a,VCardActions:x.a,VCardText:x.b,VTextField:y.a});var O={$_veeValidate:{validator:"new"},props:{user:{default:null,type:Object}},data:function(){return{id:this.user._id,current_password:"",password:"",password_confirm:""}},computed:Object(o.a)({},Object(l.e)("users",["isPatchPending"])),methods:Object(o.a)({},Object(l.b)({patch:"users/patch"}),{submit:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return t=d()(this,["current_password","password"]),e.abrupt("return",this.patch([this.id,{$set:t},{}]).then(function(){return r.$emit("status",{type:"success",message:"Password changed."})}).catch(function(e){var t=e.message;return r.$emit("status",{type:"error",message:t})}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},V=Object(v.a)(O,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[r("v-card-text",[r("h5",{staticClass:"headline mb-3"},[e._v("Change password")]),e._v(" "),r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:100",expression:"'required|min:6|max:100'"}],attrs:{"error-messages":e.errors.collect("current_password"),"browser-autocomplete":"off",label:"Current password",type:"password","data-vv-name":"current_password",required:""},model:{value:e.current_password,callback:function(t){e.current_password=t},expression:"current_password"}}),e._v(" "),r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:100",expression:"'required|min:6|max:100'"}],ref:"new_password",attrs:{"error-messages":e.errors.collect("new_password"),"browser-autocomplete":"off","data-vv-delay":"300","data-vv-name":"new_password",label:"New password",required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:new_password",expression:"'required|confirmed:new_password'"}],attrs:{"error-messages":e.errors.collect("new_password_confirm"),"browser-autocomplete":"off","data-vv-delay":"300","data-vv-name":"new_password_confirm",label:"New password confirmation",required:"",type:"password"},model:{value:e.password_confirm,callback:function(t){e.password_confirm=t},expression:"password_confirm"}})],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{disabled:e.isPatchPending,loading:e.isPatchPending,color:"primary",type:"submit"}},[e._v("Change password")])],1)],1)])},[],!1,null,null,null),C=V.exports;w()(V,{VBtn:h.a,VCard:_.a,VCardActions:x.a,VCardText:x.b,VTextField:y.a});var P={$_veeValidate:{validator:"new"},components:{UserAccountCard:j,UserPasswordCard:C},middleware:["no-org","no-auth-redirect-login"],data:function(){return{status:null}},computed:Object(o.a)({},Object(l.c)({getUser:"users/get"}),Object(l.e)(["auth"])),fetch:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,n=r.state.auth,e.next=4,r.dispatch("users/get",n.user._id);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},$=r(779),k=r(151),A=r(156),N=r(157),U=Object(v.a)(P,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{"px-1":""}},[r("v-alert",{attrs:{value:e.status,type:e.status&&e.status.type,dismissible:"",transition:"slide-y-transition"}},[e._v("\n      "+e._s(e.status&&e.status.message)+"\n    ")])],1),e._v(" "),r("v-flex",[r("v-container",{attrs:{"grid-list-xl":""}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("h3",{staticClass:"display-2 mb-2"},[e._v("User settings")])])],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",md8:""}},[r("user-account-card",{attrs:{user:e.getUser(e.auth.user._id)},on:{status:function(t){e.status=t}}})],1)],1),e._v(" "),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",md8:""}},[r("user-password-card",{attrs:{user:e.getUser(e.auth.user._id)},on:{status:function(t){e.status=t}}})],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=U.exports;w()(U,{VAlert:$.a,VContainer:k.a,VFlex:A.a,VLayout:N.a})}}]);